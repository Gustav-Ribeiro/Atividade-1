#include <stdio.h>
#include <stdlib.h>
#include <string.h>

#define MAX_TAM 100

typedef struct students {
    char nome[50];
    char numero[50];
    char curso[50];
    char nota1[50];
    char nota2[50];
} students;

int main() {
    FILE *arquivo = fopen("DadosEntrada.csv", "r");
    FILE *status = fopen("SituacaoFinal.csv", "w");
    
    if (arquivo == NULL || status == NULL) {
        printf("Não foi possível abrir o arquivo.\n");
        return 1;
    }
    
    students line;
    char tamanho[MAX_TAM];
    
    fgets(tamanho, sizeof(tamanho), arquivo);
    
    fprintf(status, "Nome, Media, Situacao\n");
    
    while (fgets(tamanho, sizeof(tamanho), arquivo)) {
        
        char *token = strtok(tamanho, ",");
        strcpy(line.nome, token);
        token = strtok(NULL, ",");
        strcpy(line.numero, token);
        token = strtok(NULL, ",");
        strcpy(line.curso, token);
        token = strtok(NULL, ",");
        strcpy(line.nota1, token);
        token = strtok(NULL, ",");
        strcpy(line.nota2, token);

        
        double nota1 = atof(line.nota1);
        double nota2 = atof(line.nota2);

        float media = (nota1 + nota2) / 2.0;

        
        const char *situacao;
        if (media >= 7.0) {
            situacao = "Aprovado";
        } else {
            situacao = "Reprovado";
        }

        fprintf(status, "%s,%.2f,%s\n", line.nome, media, situacao);
    }

    fclose(arquivo);
    fclose(status);

    printf("DEU BOM FAMILIA. OLHA ESSA MERDA DE SituacaoFinal.csv.\n");

    return 0;
}
